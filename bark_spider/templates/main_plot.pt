<html>
    <head>
        <link rel="stylesheet" href="static/lib/bootstrap.min.css">
        <link rel="stylesheet" href="static/lib/bootstrap-theme.min.css">
        <link rel="stylesheet" href="static/lib/angular-chart.min.css">

        <script src="static/lib/jquery-2.1.4.min.js"></script>

        <script src="static/lib/bootstrap.min.js"></script>
        <script src="static/lib/angular.min.js"></script>
        <script src="static/lib/Chart.min.js"></script>
        <script src="static/lib/angular-chart.min.js"></script>
        <script src="static/lib/underscore-min.js"></script>
        <script src="static/lib/ui-bootstrap-tpls.min.js"></script>

        <script src="static/js/app.js"></script>
        <script src="static/js/controllers.js"></script>
    </head>
    <body ng-app="BarkSpiderApp" ng-controller="BarkSpiderCtrl">

        <div class="container-fluid">
            <div class="row">
                <div class="col-md-4">
                    <h1>Simulation parameters</h1>

                    <div class="row">
                        <div class="col-md-12">
                            <button id="add-parameters-btn" type="button" class="btn btn-default" ng-click="add_simulation('New parameter set');">Add parameter set</button>
                            <button type="button" class="btn btn-primary pull-right" ng-click="simulate()" ng-disabled="included_params().length == 0">Run simulation</button>
                        </div>
                    </div>

                    <hr>

                    <div ng-repeat="simulation in simulations" ng-controller="ParameterSetCtrl">
                        <div class="row">
                            <div class="input-group input-group">
                                <span class="input-group-btn">
                                    <button type="button" class="hide-show-parameters form-control btn btn-default" ng-click="opened = !opened">
                                        <span class="glyphicon" ng-class="{'glyphicon-chevron-down': opened, 'glyphicon-chevron-right': !opened}"></span>
                                    </button>
                                </span>
                                <input type="text" class="form-control" ng-model="simulation.name">
                                <div class="input-group-btn">
                                    <button type="button" class="btn btn-default include-exclude-parameters" ng-click="simulation.included = !simulation.included" ng-class="{'btn-info': !simulation.included}">
                                        <span ng-switch="simulation.included">
                                            <span ng-switch-when="true">exclude</span>
                                            <span ng-switch-when="false">include</span>
                                        </span>
                                    </button>
                                    <button type="button" class="btn btn-default" ng-click="remove_parameter_set($index);">
                                        delete
                                    </button>
                                </div>
                            </div>
                        </div>
                        <div uib-collapse="!opened">
                            <form class="parameter-set-form">
                                <div class="row">
                                    <div class="col-sm-4">
                                        <label class="control-label pull-right">Assimilation delay (days)</label>
                                    </div>
                                    <div class="col-sm-8">
                                        <input class="form-control pull-right" type="number" min="0" value="20" ng-model="simulation.parameters.assimilation_delay"/>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-sm-4">
                                        <label class="control-label pull-right">Training overhead (0-1)</label>
                                    </div>
                                    <div class="col-sm-8">
                                        <input class="form-control pull-right" type="number" min="0" value="1" ng-model="simulation.parameters.training_overhead_proportion"/>
                                    </div>
                                </div>
                                <div class="row">
                                    <label class="col-sm-12 control-label">Interventions</label>
                                </div>
                                <div class="row">
                                    <div class="col-sm-12">
                                        <textarea class="form-control" ng-model="simulation.parameters.interventions"></textarea>
                                    </div>
                                </div>
                            </form>
                        </div> <!-- uib-collapsed -->
                    </div> <!-- repeat -->
                </div>
                <div class="col-md-8">
                    <div ng-show="error_messages.length == 0">
                        <canvas id="software-development-rate-chart" class="chart chart-line" chart-data="data"
                                chart-labels="labels" chart-legend="true" chart-series="series"
                                chart-click="onClick"
                                chart-options="options">
                        </canvas>
                    </div>

                    <div class="panel panel-default" ng-show="error_messages.length > 0">
                        <div class="panel-heading">Errors</div>
                        <div class="panel-body">
                            <div class="alert alert-danger" role="alert" ng-repeat="message in error_messages track by $index">
                                {{message}}
                            </div>
                        </div>
                    </div>

                </div>
            </div>
        </div>
    </body>
</html>
